{"remainingRequest":"C:\\Users\\A065413\\Documents\\GitHub\\spoti-match\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\A065413\\Documents\\GitHub\\spoti-match\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\Users\\A065413\\Documents\\GitHub\\spoti-match\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!C:\\Users\\A065413\\Documents\\GitHub\\spoti-match\\src\\components\\playback.vue?vue&type=script&setup=true&lang=js","dependencies":[{"path":"C:\\Users\\A065413\\Documents\\GitHub\\spoti-match\\src\\components\\playback.vue","mtime":1652032297727},{"path":"C:\\Users\\A065413\\Documents\\GitHub\\spoti-match\\babel.config.js","mtime":1652032283166},{"path":"C:\\Users\\A065413\\Documents\\GitHub\\spoti-match\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1652032285680},{"path":"C:\\Users\\A065413\\Documents\\GitHub\\spoti-match\\node_modules\\babel-loader\\lib\\index.js","mtime":1652032285342},{"path":"C:\\Users\\A065413\\Documents\\GitHub\\spoti-match\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1652032285680},{"path":"C:\\Users\\A065413\\Documents\\GitHub\\spoti-match\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1652032296712}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgb25Nb3VudGVkLCByZWYgfSBmcm9tICJ2dWUiOwppbXBvcnQgeyBnZXRNeUN1cnJlbnRQbGF5aW5nVHJhY2ssIHBhdXNlLCBwbGF5LCBza2lwVG9QcmV2aW91cywgc2tpcFRvTmV4dCB9IGZyb20gIkAvc2VydmljZXMvc3BvdGlmeSI7CmV4cG9ydCBkZWZhdWx0IHsKICBzZXR1cDogZnVuY3Rpb24gc2V0dXAoX19wcm9wcywgX3JlZikgewogICAgdmFyIGV4cG9zZSA9IF9yZWYuZXhwb3NlOwogICAgZXhwb3NlKCk7CiAgICB2YXIgY29udGFpbmVyQ2xhc3MgPSByZWYoIiIpOwogICAgdmFyIHBsYXliYWNrID0gcmVmKG51bGwpOwogICAgdmFyIHBsYXliYWNrRGF0YSA9IHJlZigpOwoKICAgIHZhciBnZXRDdXJyZW50UGxheWluZyA9IGZ1bmN0aW9uIGdldEN1cnJlbnRQbGF5aW5nKCkgewogICAgICBnZXRNeUN1cnJlbnRQbGF5aW5nVHJhY2soKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBwbGF5YmFja0RhdGEudmFsdWUgPSByZXM7CiAgICAgIH0pOwogICAgfTsKCiAgICB2YXIgdG9nZ2xlU3RhdHVzID0gZnVuY3Rpb24gdG9nZ2xlU3RhdHVzKCkgewogICAgICBpZiAocGxheWJhY2tEYXRhLnZhbHVlLmlzX3BsYXlpbmcpIHsKICAgICAgICBwYXVzZSgpLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgICAgZ2V0Q3VycmVudFBsYXlpbmcoKTsKICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICBwbGF5KCkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgICBnZXRDdXJyZW50UGxheWluZygpOwogICAgICAgIH0pOwogICAgICB9CiAgICB9OwoKICAgIHZhciBwcmV2ID0gZnVuY3Rpb24gcHJldigpIHsKICAgICAgc2tpcFRvUHJldmlvdXMoKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICBnZXRDdXJyZW50UGxheWluZygpOwogICAgICB9KTsKICAgIH07CgogICAgdmFyIG5leHQgPSBmdW5jdGlvbiBuZXh0KCkgewogICAgICBza2lwVG9OZXh0KCkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgZ2V0Q3VycmVudFBsYXlpbmcoKTsKICAgICAgfSk7CiAgICB9OwoKICAgIG9uTW91bnRlZChmdW5jdGlvbiAoKSB7CiAgICAgIGdldEN1cnJlbnRQbGF5aW5nKCk7IC8vIGlmIHVzZXIgc2Nyb2xscyB0byB0aGUgYm90dG9tIG9mIHRoZSBwYWdlLAoKICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigic2Nyb2xsIiwgZnVuY3Rpb24gKCkgewogICAgICAgIGlmICh3aW5kb3cuaW5uZXJIZWlnaHQgKyB3aW5kb3cuc2Nyb2xsWSArIHBsYXliYWNrLnZhbHVlLm9mZnNldEhlaWdodCA+PSBkb2N1bWVudC5ib2R5Lm9mZnNldEhlaWdodCAqIDAuOSkgewogICAgICAgICAgLy8gdGhlbiBsb2FkIG1vcmUgZGF0YQogICAgICAgICAgY29udGFpbmVyQ2xhc3MudmFsdWUgPSAiZml4ZCI7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGNvbnRhaW5lckNsYXNzLnZhbHVlID0gImZpeGVkIjsKICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge30sIDUwMCk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0pOwogICAgdmFyIF9fcmV0dXJuZWRfXyA9IHsKICAgICAgY29udGFpbmVyQ2xhc3M6IGNvbnRhaW5lckNsYXNzLAogICAgICBwbGF5YmFjazogcGxheWJhY2ssCiAgICAgIHBsYXliYWNrRGF0YTogcGxheWJhY2tEYXRhLAogICAgICBnZXRDdXJyZW50UGxheWluZzogZ2V0Q3VycmVudFBsYXlpbmcsCiAgICAgIHRvZ2dsZVN0YXR1czogdG9nZ2xlU3RhdHVzLAogICAgICBwcmV2OiBwcmV2LAogICAgICBuZXh0OiBuZXh0LAogICAgICBvbk1vdW50ZWQ6IG9uTW91bnRlZCwKICAgICAgcmVmOiByZWYsCiAgICAgIGdldE15Q3VycmVudFBsYXlpbmdUcmFjazogZ2V0TXlDdXJyZW50UGxheWluZ1RyYWNrLAogICAgICBwYXVzZTogcGF1c2UsCiAgICAgIHBsYXk6IHBsYXksCiAgICAgIHNraXBUb1ByZXZpb3VzOiBza2lwVG9QcmV2aW91cywKICAgICAgc2tpcFRvTmV4dDogc2tpcFRvTmV4dAogICAgfTsKICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShfX3JldHVybmVkX18sICdfX2lzU2NyaXB0U2V0dXAnLCB7CiAgICAgIGVudW1lcmFibGU6IGZhbHNlLAogICAgICB2YWx1ZTogdHJ1ZQogICAgfSk7CiAgICByZXR1cm4gX19yZXR1cm5lZF9fOwogIH0KfTs="},{"version":3,"mappings":"AAyBA,SAASA,SAAT,EAAoBC,GAApB,QAA+B,KAA/B;AACA,SACEC,wBADF,EAEEC,KAFF,EAGEC,IAHF,EAIEC,cAJF,EAKEC,UALF,QAMO,oBANP;;;;;AAOA,QAAMC,cAAc,GAAGN,GAAG,CAAC,EAAD,CAA1B;AACA,QAAMO,QAAQ,GAAGP,GAAG,CAAC,IAAD,CAApB;AACA,QAAMQ,YAAY,GAAGR,GAAG,EAAxB;;AAEA,QAAMS,iBAAiB,GAAG,SAApBA,iBAAoB,GAAM;AAC9BR,8BAAwB,GAAGS,IAA3B,CAAgC,UAACC,GAAD,EAAS;AACvCH,oBAAY,CAACI,KAAb,GAAqBD,GAArB;AACD,OAFD;AAGD,KAJD;;AAMA,QAAME,YAAY,GAAG,SAAfA,YAAe,GAAM;AACzB,UAAIL,YAAY,CAACI,KAAb,CAAmBE,UAAvB,EAAmC;AACjCZ,aAAK,GAAGQ,IAAR,CAAa,YAAM;AACjBD,2BAAiB;AAClB,SAFD;AAGD,OAJD,MAIO;AACLN,YAAI,GAAGO,IAAP,CAAY,YAAM;AAChBD,2BAAiB;AAClB,SAFD;AAGD;AACF,KAVD;;AAYA,QAAMM,IAAI,GAAG,SAAPA,IAAO,GAAM;AACjBX,oBAAc,GAAGM,IAAjB,CAAsB,YAAM;AAC1BD,yBAAiB;AAClB,OAFD;AAGD,KAJD;;AAMA,QAAMO,IAAI,GAAG,SAAPA,IAAO,GAAM;AACjBX,gBAAU,GAAGK,IAAb,CAAkB,YAAM;AACtBD,yBAAiB;AAClB,OAFD;AAGD,KAJD;;AAMAV,aAAS,CAAC,YAAM;AACdU,uBAAiB,GADH,CAGd;;AACAQ,cAAQ,CAACC,gBAAT,CAA0B,QAA1B,EAAoC,YAAM;AACxC,YACEC,MAAM,CAACC,WAAP,GAAqBD,MAAM,CAACE,OAA5B,GAAsCd,QAAQ,CAACK,KAAT,CAAeU,YAArD,IACAL,QAAQ,CAACM,IAAT,CAAcD,YAAd,GAA6B,GAF/B,EAGE;AACA;AACAhB,wBAAc,CAACM,KAAf,GAAuB,MAAvB;AACD,SAND,MAMO;AACLN,wBAAc,CAACM,KAAf,GAAuB,OAAvB;AACAY,oBAAU,CAAC,YAAM,CAAE,CAAT,EAAW,GAAX,CAAV;AACD;AACF,OAXD;AAYD,KAhBQ,CAAT","names":["onMounted","ref","getMyCurrentPlayingTrack","pause","play","skipToPrevious","skipToNext","containerClass","playback","playbackData","getCurrentPlaying","then","res","value","toggleStatus","is_playing","prev","next","document","addEventListener","window","innerHeight","scrollY","offsetHeight","body","setTimeout"],"sources":["C:/Users/A065413/Documents/GitHub/spoti-match/src/components/playback.vue"],"sourcesContent":["<template>\r\n  <div class=\"playback\" ref=\"playback\" :class=\"containerClass\">\r\n    <div class=\"item\" v-if=\"playbackData\">\r\n      <div class=\"item-image\">\r\n        <img :src=\"playbackData.item.album.images[0].url\" />\r\n      </div>\r\n      <div class=\"content\">\r\n        <div class=\"title\">{{ playbackData.item.name }}</div>\r\n        <div class=\"desc\">\r\n          {{ playbackData.item.artists[0].name }}\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"action-buttons\" v-if=\"playbackData\">\r\n      <ion-icon name=\"play-back-outline\" @click=\"prev\"></ion-icon>\r\n      <ion-icon\r\n        :name=\"playbackData.is_playing ? 'pause-outline' : 'play-outline'\"\r\n        @click=\"toggleStatus\"\r\n      ></ion-icon>\r\n      <ion-icon name=\"play-forward-outline\" @click=\"next\"></ion-icon>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { onMounted, ref } from \"vue\";\r\nimport {\r\n  getMyCurrentPlayingTrack,\r\n  pause,\r\n  play,\r\n  skipToPrevious,\r\n  skipToNext,\r\n} from \"@/services/spotify\";\r\nconst containerClass = ref(\"\");\r\nconst playback = ref(null);\r\nconst playbackData = ref();\r\n\r\nconst getCurrentPlaying = () => {\r\n  getMyCurrentPlayingTrack().then((res) => {\r\n    playbackData.value = res;\r\n  });\r\n};\r\n\r\nconst toggleStatus = () => {\r\n  if (playbackData.value.is_playing) {\r\n    pause().then(() => {\r\n      getCurrentPlaying();\r\n    });\r\n  } else {\r\n    play().then(() => {\r\n      getCurrentPlaying();\r\n    });\r\n  }\r\n};\r\n\r\nconst prev = () => {\r\n  skipToPrevious().then(() => {\r\n    getCurrentPlaying();\r\n  });\r\n};\r\n\r\nconst next = () => {\r\n  skipToNext().then(() => {\r\n    getCurrentPlaying();\r\n  });\r\n};\r\n\r\nonMounted(() => {\r\n  getCurrentPlaying();\r\n\r\n  // if user scrolls to the bottom of the page,\r\n  document.addEventListener(\"scroll\", () => {\r\n    if (\r\n      window.innerHeight + window.scrollY + playback.value.offsetHeight >=\r\n      document.body.offsetHeight * 0.9\r\n    ) {\r\n      // then load more data\r\n      containerClass.value = \"fixd\";\r\n    } else {\r\n      containerClass.value = \"fixed\";\r\n      setTimeout(() => {}, 500);\r\n    }\r\n  });\r\n});\r\n</script>"]}]}